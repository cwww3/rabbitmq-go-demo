- 重启rabbitmq后 发现原先的queue不在了

- 要确保消息不会丢失，需要做两件事：我们需要将队列和消息都标记为持久的。

- 将消息标记为持久性并不能完全保证消息不会丢失。尽管它告诉RabbitMQ将消息保存到磁盘上，但是RabbitMQ接受了一条消息并且还没有保存它时，仍然有一个很短的时间窗口。而且，RabbitMQ并不是对每个消息都执行fsync(2)——它可能只是保存到缓存中，而不是真正写入磁盘。